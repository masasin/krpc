

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Extending kRPC &mdash; kRPC 0.1.6 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="kRPC 0.1.6 documentation" href="index.html"/>
        <link rel="next" title="Communication Protocol" href="communication-protocol.html"/>
        <link rel="prev" title="Compiling kRPC" href="compiling.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> kRPC</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#the-server-plugin">The Server Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#the-python-client">The Python Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#hello-world-script">&#8216;Hello World&#8217; Script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/suborbital-flight.html">Sub-Orbital Flight</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/reference-frames.html">Reference Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/launch-into-orbit.html">Launch into Orbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/pitch-heading-roll.html">Pitch, Heading and Roll</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/parts.html">Interacting with Parts</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/docking-guidance.html">Docking Guidance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python-api.html">Python API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python-api/space-center.html">SpaceCenter</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/vessel.html">Vessel</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/celestial-body.html">CelestialBody</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/flight.html">Flight</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/orbit.html">Orbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/control.html">Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/resources.html">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/parts.html">Parts</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/node.html">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/comms.html">Comms</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/reference-frame.html">ReferenceFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/auto-pilot.html">AutoPilot</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-api/geometry-types.html">Geometry Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compiling.html">Compiling kRPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compiling.html#the-server-plugin">The Server Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="compiling.html#the-python-client-library">The Python Client Library</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Extending kRPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-krpc-architecture">The kRPC Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#service-api">Service API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#further-examples">Further Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="communication-protocol.html">Communication Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="communication-protocol.html#establishing-a-connection">Establishing a connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="communication-protocol.html#remote-procedures">Remote Procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="communication-protocol.html#protocol-buffer-encoding">Protocol Buffer Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="communication-protocol.html#streams">Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="communication-protocol.html#krpc-service">KRPC Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="communication-protocol.html#service-description-message">Service Description Message</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">kRPC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Extending kRPC</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/extending.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="extending-krpc">
<span id="extending"></span><h1>Extending kRPC<a class="headerlink" href="#extending-krpc" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-krpc-architecture">
<h2>The kRPC Architecture<a class="headerlink" href="#the-krpc-architecture" title="Permalink to this headline">¶</a></h2>
<p>kRPC consists of two components: a server and a client. The server plugin
(provided by <tt class="docutils literal"><span class="pre">kRPC.dll</span></tt>) runs inside KSP. It provides a collection of
<em>procedures</em> that clients can run. These procedures are arranged in groups
called <em>services</em> to keep things organized. It also provides an in-game user
interface that can be used to start/stop the server, change settings and monitor
active clients.</p>
<p>Clients run outside of KSP. This gives you the freedom to run scripts in
whatever environment you want. A client communicates with the server to run
procedures. kRPC comes with a <a class="reference external" href="https://pypi.python.org/pypi/krpc">Python client library</a> that implementes the <a class="reference internal" href="communication-protocol.html#communication-protocol"><em>communication
protocol</em></a>, making it easy to write Python scripts that
can talk to the server. Client libraries for other languages may be added in the
future. kRPC supports multiple concurrent clients.</p>
<p>kRPC comes with a collection of standard functionality for interacting with
craft, contained in a service called <a class="reference internal" href="python-api/space-center.html#SpaceCenter" title="SpaceCenter"><tt class="xref py py-class docutils literal"><span class="pre">SpaceCenter</span></tt></a>. This service provides
procedures for things like getting flight/orbital data and controlling the
active vessel. This service is provided by
<tt class="docutils literal"><span class="pre">kRPCSpaceCenter.dll</span></tt>.</p>
</div>
<div class="section" id="service-api">
<h2>Service API<a class="headerlink" href="#service-api" title="Permalink to this headline">¶</a></h2>
<p>Third party mods can add functionality to kRPC using the <em>Service API</em>. This is
done by adding <a class="reference internal" href="#service-api-attributes"><em>attributes</em></a> to your own classes,
methods and properties to make them visible through the server. When the kRPC
server starts, it scans all loaded assemblies looking for classes, methods and
properties with these attributes.</p>
<p>The following example implements a service that can control the throttle and
staging of the active vessel:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="k">using</span> <span class="nn">KRPC.Service</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">KRPC.Service.Attributes</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">LaunchControl</span> <span class="p">{</span>

<span class="na">    [KRPCService (GameScene = GameScene.Flight)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">LaunchControl</span> <span class="p">{</span>

<span class="na">        [KRPCProperty]</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Throttle</span> <span class="p">{</span>
            <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">FlightInputHandler</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">mainThrottle</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">set</span> <span class="p">{</span> <span class="n">FlightInputHandler</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">mainThrottle</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">}</span>

<span class="na">        [KRPCProcedure]</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">ActivateStage</span> <span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Staging</span><span class="p">.</span><span class="n">ActivateNextStage</span> <span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example shows how this service can be used from a python client:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">krpc</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">krpc</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">conn</span><span class="o">.</span><span class="n">launch_control</span><span class="o">.</span><span class="n">throttle</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">conn</span><span class="o">.</span><span class="n">launch_control</span><span class="o">.</span><span class="n">activate_stage</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="attributes">
<span id="service-api-attributes"></span><h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>The following <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa287992.aspx">C# attributes</a> can be used to add
functionality to the kRPC server.</p>
<dl class="class">
<dt id="KRPCService">
<em class="property">class </em><tt class="descname">KRPCService</tt><big>(</big><span class="optional">[</span><em>Name</em><span class="optional">]</span><span class="optional">[</span>, <em>GameScene</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#KRPCService" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>Name</strong> (<em>string</em>) &#8211; Optional name for the service. If omitted, the service
name is set to the name of the class this attribute is
applied to.</li>
<li><strong>GameScene</strong> (<a class="reference internal" href="#GameScene" title="GameScene"><em>GameScene</em></a>) &#8211; The game scenes in which the services procedures
are available.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa287992.aspx">attribute</a> is
applied to a static class, to indicate that all methods, properties and
classes declared within it are part of the the same service. The name of the
service is set to the name of the class, or &#8211; if present &#8211; the <tt class="docutils literal"><span class="pre">Name</span></tt>
parameter.</p>
<p>Multiple services with the same name can be declared, as long the classes,
procedures and methods they contain have unique names. The classes will be
merged to appear as a single service on the server.</p>
<p>The type to which this attribute is applied must satisfy the following
criteria:</p>
<ul class="simple">
<li>The type must be a class.</li>
<li>The class must be <tt class="docutils literal"><span class="pre">public</span> <span class="pre">static</span></tt>.</li>
<li>The name of the class, or the <tt class="docutils literal"><span class="pre">Name</span></tt> parameter if specified, must be a
valid <a class="reference internal" href="#service-api-identifiers"><em>kRPC identifier</em></a>.</li>
<li>The class must not be declared within another class that has the
<a class="reference internal" href="#KRPCService" title="KRPCService"><tt class="xref py py-class docutils literal"><span class="pre">KRPCService</span></tt></a> attribute. Nesting of services is not permitted.</li>
</ul>
<p>Services are configured to be available in specific <a class="reference internal" href="#service-api-game-scenes"><em>game scenes</em></a> via the <tt class="docutils literal"><span class="pre">GameScene</span></tt> parameter. If the
<tt class="docutils literal"><span class="pre">GameScene</span></tt> parameter is not specified, the service is available in any
scene. If a procedure is called when the service is not available, it will
throw an exception.</p>
<p><strong>Examples</strong></p>
<ul>
<li><p class="first">Declare a service called <tt class="docutils literal"><span class="pre">EVA</span></tt>:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">EVA</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Declare a service called <tt class="docutils literal"><span class="pre">MyEVAService</span></tt> (different to the name of the
class):</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService (Name = &quot;MyEVAService&quot;)]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">EVA</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Declare a service called <tt class="docutils literal"><span class="pre">FlightTools</span></tt> that is only available during the
<tt class="docutils literal"><span class="pre">Flight</span></tt> game scene:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService (GameScene = GameScene.Flight)]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">FlightTools</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="KRPCProcedure">
<em class="property">class </em><tt class="descname">KRPCProcedure</tt><a class="headerlink" href="#KRPCProcedure" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa287992.aspx">attribute</a> is
applied to static methods, to add them to the server as procedures.</p>
<p>The method to which this attribute is applied must satisfy the following
criteria:</p>
<ul class="simple">
<li>The method must be <tt class="docutils literal"><span class="pre">public</span> <span class="pre">static</span></tt>.</li>
<li>The name of the method must be a valid <a class="reference internal" href="#service-api-identifiers"><em>kRPC identifier</em></a>.</li>
<li>The method must be declared inside a class that is a <a class="reference internal" href="#KRPCService" title="KRPCService"><tt class="xref py py-class docutils literal"><span class="pre">KRPCService</span></tt></a>.</li>
<li>The parameter types and return type must be <a class="reference internal" href="#service-api-serializable-types"><em>types that kRPC knows how
to serialize</em></a>.</li>
<li>Parameters can have default arguments.</li>
</ul>
<p><strong>Example</strong></p>
<p>The following defines a service called <tt class="docutils literal"><span class="pre">EVA</span></tt> with a <tt class="docutils literal"><span class="pre">PlantFlag</span></tt> procedure
that takes a name and an optional description, and returns a <tt class="docutils literal"><span class="pre">Flag</span></tt> object.</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">EVA</span> <span class="p">{</span>
<span class="na">    [KRPCProcedure]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">Flag</span> <span class="nf">PlantFlag</span> <span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">string</span> <span class="n">description</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This can be called from a python client as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">krpc</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">krpc</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">flag</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">eva</span><span class="o">.</span><span class="n">plant_flag</span><span class="p">(</span><span class="s">&#39;Landing Site&#39;</span><span class="p">,</span> <span class="s">&#39;One small step for Kerbal-kind&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="KRPCClass">
<em class="property">class </em><tt class="descname">KRPCClass</tt><big>(</big><span class="optional">[</span><em>Service</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#KRPCClass" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Service</strong> (<em>string</em>) &#8211; Optional name of the service to add this class to. If
omitted, the class is added to the service that
contains its definition.</td>
</tr>
</tbody>
</table>
<p>This <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa287992.aspx">attribute</a> is
applied to non-static classes. It adds the class to the server, so that
references to instances of the class can be passed between client and server.</p>
<p>A <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a> must be part of a service, just like a
<a class="reference internal" href="#KRPCProcedure" title="KRPCProcedure"><tt class="xref py py-class docutils literal"><span class="pre">KRPCProcedure</span></tt></a>. However, it would be restrictive if the class had to
be declared as a nested class inside a class with the <a class="reference internal" href="#KRPCService" title="KRPCService"><tt class="xref py py-class docutils literal"><span class="pre">KRPCService</span></tt></a>
attribute. Therefore, a <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a> can be declared outside of any
service if it has the <tt class="docutils literal"><span class="pre">Service</span></tt> parameter set to the name of the service
that it is part of. Also, the service that the <tt class="docutils literal"><span class="pre">Service</span></tt> parameter refers
to does not have to exist. If it does not exist, a service with the given
name is created.</p>
<p>The class to which this attribute is applied must satisfy the following
criteria:</p>
<ul class="simple">
<li>The class must be <tt class="docutils literal"><span class="pre">public</span></tt> and <em>not</em> <tt class="docutils literal"><span class="pre">static</span></tt>.</li>
<li>The name of the class must be a valid <a class="reference internal" href="#service-api-identifiers"><em>kRPC identifier</em></a>.</li>
<li>The class must either be declared inside a class that is a
<a class="reference internal" href="#KRPCService" title="KRPCService"><tt class="xref py py-class docutils literal"><span class="pre">KRPCService</span></tt></a>, or have its <tt class="docutils literal"><span class="pre">Service</span></tt> parameter set to the name of
the service it is part of.</li>
</ul>
<p><strong>Examples</strong></p>
<ul>
<li><p class="first">Declare a class called <tt class="docutils literal"><span class="pre">Flag</span></tt> in the <tt class="docutils literal"><span class="pre">EVA</span></tt> service:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">EVA</span> <span class="p">{</span>
<span class="na">    [KRPCClass]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Flag</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Declare a class called <tt class="docutils literal"><span class="pre">Flag</span></tt>, without nesting the class definition in a
service class:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCClass (Service = &quot;EVA&quot;)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Flag</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="KRPCMethod">
<em class="property">class </em><tt class="descname">KRPCMethod</tt><a class="headerlink" href="#KRPCMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa287992.aspx">attribute</a> is
applied to non-static methods inside a <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a>. This allows a
client to call methods on an instance of a class. This attribute works
similarly to <a class="reference internal" href="#KRPCProcedure" title="KRPCProcedure"><tt class="xref py py-class docutils literal"><span class="pre">KRPCProcedure</span></tt></a> but is applied to non-static methods.</p>
<p>The method to which this attribute is applied must satisfy the following
criteria:</p>
<ul class="simple">
<li>The method must be <tt class="docutils literal"><span class="pre">public</span></tt> and <em>not</em> <tt class="docutils literal"><span class="pre">static</span></tt>.</li>
<li>The name of the method must be a valid <a class="reference internal" href="#service-api-identifiers"><em>kRPC identifier</em></a>.</li>
<li>The method must be declared in a <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a>.</li>
<li>The parameter types and return type must be <a class="reference internal" href="#service-api-serializable-types"><em>types that kRPC can
serialize</em></a>.</li>
<li>Parameters can have default arguments.</li>
</ul>
<p><strong>Example</strong></p>
<p>Declare a <tt class="docutils literal"><span class="pre">Remove</span></tt> method in the <tt class="docutils literal"><span class="pre">Flag</span></tt> class:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCClass (Service = &quot;EVA&quot;)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Flag</span> <span class="p">{</span>
<span class="na">    [KRPCMethod]</span>
    <span class="k">void</span> <span class="nf">Remove</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="KRPCProperty">
<em class="property">class </em><tt class="descname">KRPCProperty</tt><a class="headerlink" href="#KRPCProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa287992.aspx">attribute</a> is
applied to class properties, and comes in two flavors:</p>
<ol class="arabic simple">
<li>Applied to static properties in a <a class="reference internal" href="#KRPCService" title="KRPCService"><tt class="xref py py-class docutils literal"><span class="pre">KRPCService</span></tt></a>. In this case, the
property must satisfy the following criteria:<ul>
<li>Must be <tt class="docutils literal"><span class="pre">public</span> <span class="pre">static</span></tt> and have at least one publicly accessible
getter or setter.</li>
<li>The name of the property must be a valid <a class="reference internal" href="#service-api-identifiers"><em>kRPC identifier</em></a>.</li>
<li>Must be declared inside a <a class="reference internal" href="#KRPCService" title="KRPCService"><tt class="xref py py-class docutils literal"><span class="pre">KRPCService</span></tt></a>.</li>
</ul>
</li>
<li>Applied to non-static properties in a <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a>. In this case,
the property must satisfy the following criteria:<ul>
<li>Must be <tt class="docutils literal"><span class="pre">public</span></tt> and <em>not</em> <tt class="docutils literal"><span class="pre">static</span></tt>, and have at least one publicly
accessible getter or setter.</li>
<li>The name of the property must be a valid <a class="reference internal" href="#service-api-identifiers"><em>kRPC identifier</em></a>.</li>
<li>Must be declared inside a <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a>.</li>
</ul>
</li>
</ol>
<p><strong>Examples</strong></p>
<ul>
<li><p class="first">Applied to a static property in a service:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">EVA</span> <span class="p">{</span>
<span class="na">    [KRPCProperty]</span>
    <span class="k">public</span> <span class="n">Flag</span> <span class="n">LastFlag</span>
    <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This property can be accessed from a python client as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">krpc</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">krpc</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">flag</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">eva</span><span class="o">.</span><span class="n">last_flag</span>
</pre></div>
</div>
</li>
<li><p class="first">Applied to a non-static property in a class:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCClass (Service = &quot;EVA&quot;)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Flag</span> <span class="p">{</span>
<span class="na">    [KRPCProperty]</span>
    <span class="k">public</span> <span class="k">void</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="na">    [KRPCProperty]</span>
    <span class="k">public</span> <span class="k">void</span> <span class="n">Description</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="KRPCEnum">
<em class="property">class </em><tt class="descname">KRPCEnum</tt><big>(</big><span class="optional">[</span><em>Service</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#KRPCEnum" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Service</strong> (<em>string</em>) &#8211; Optional name of the service to add this enum to. If
omitted, the enum is added to the service that
contains its definition.</td>
</tr>
</tbody>
</table>
<p>This <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa287992.aspx">attribute</a> is
applied to enumeration types. It adds the enumeration and its permissible
values to the server. This attribute works similarly to <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a>,
but is applied to enumeration types.</p>
<p>A <a class="reference internal" href="#KRPCEnum" title="KRPCEnum"><tt class="xref py py-class docutils literal"><span class="pre">KRPCEnum</span></tt></a> must be part of a service, just like a
<a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a>. Similarly, a <a class="reference internal" href="#KRPCEnum" title="KRPCEnum"><tt class="xref py py-class docutils literal"><span class="pre">KRPCEnum</span></tt></a> can be declared outside of
a service if it has its <tt class="docutils literal"><span class="pre">Service</span></tt> parameter set to the name of the service
that it is part of.</p>
<p>The enumeration type to which this attribute is applied must satisfy the
following criteria:</p>
<ul class="simple">
<li>The enumeration must be <tt class="docutils literal"><span class="pre">public</span></tt>.</li>
<li>The name of the enumeration must be a valid <a class="reference internal" href="#service-api-identifiers"><em>kRPC identifier</em></a>.</li>
<li>The enumeration must either be declared inside a <a class="reference internal" href="#KRPCService" title="KRPCService"><tt class="xref py py-class docutils literal"><span class="pre">KRPCService</span></tt></a>, or
have it&#8217;s <tt class="docutils literal"><span class="pre">Service</span></tt> parameter set to the name of the service it is part of.</li>
<li>The <a class="reference external" href="https://msdn.microsoft.com/en-gb/library/sbbt4032.aspx">underlying C# type</a> must be an
<tt class="docutils literal"><span class="pre">int</span></tt>.</li>
</ul>
<p><strong>Examples</strong></p>
<ul>
<li><p class="first">Declare an enumeration type with two values:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCEnum (Service = &quot;EVA&quot;)]</span>
<span class="k">public</span> <span class="k">enum</span> <span class="n">FlagState</span> <span class="p">{</span>
    <span class="n">Raised</span><span class="p">,</span>
    <span class="n">Lowered</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This can be used from a python client as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">krpc</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">krpc</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">eva</span><span class="o">.</span><span class="n">FlagState</span><span class="o">.</span><span class="n">lowered</span>
</pre></div>
</div>
</li>
</ul>
</dd></dl>

</div>
<div class="section" id="service-api-identifiers">
<span id="identifiers"></span><h3>Identifiers<a class="headerlink" href="#service-api-identifiers" title="Permalink to this headline">¶</a></h3>
<p>An identifier must only contain alphanumeric characters and underscores. An
identifier must not start with an underscore. Identifiers should follow
<a class="reference external" href="http://en.wikipedia.org/wiki/CamelCase">CamelCase</a> capitalization
conventions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although underscores are permitted, they should be avoided as they are
used for internal name mangling.</p>
</div>
</div>
<div class="section" id="serializable-types">
<span id="service-api-serializable-types"></span><h3>Serializable Types<a class="headerlink" href="#serializable-types" title="Permalink to this headline">¶</a></h3>
<p>A type can only be used as a parameter or return type if kRPC knows how to
serialize it. The following types are serializable:</p>
<ul class="simple">
<li>The C# types <tt class="docutils literal"><span class="pre">double</span></tt>, <tt class="docutils literal"><span class="pre">float</span></tt>, <tt class="docutils literal"><span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">long</span></tt>, <tt class="docutils literal"><span class="pre">uint</span></tt>, <tt class="docutils literal"><span class="pre">ulong</span></tt>,
<tt class="docutils literal"><span class="pre">bool</span></tt>, <tt class="docutils literal"><span class="pre">string</span></tt> and <tt class="docutils literal"><span class="pre">byte[]</span></tt></li>
<li>Any protocol buffer message type</li>
<li>Any type annotated with <a class="reference internal" href="#KRPCClass" title="KRPCClass"><tt class="xref py py-class docutils literal"><span class="pre">KRPCClass</span></tt></a></li>
<li>Any type annotated with <a class="reference internal" href="#KRPCEnum" title="KRPCEnum"><tt class="xref py py-class docutils literal"><span class="pre">KRPCEnum</span></tt></a></li>
<li>Collections of serializable types:<ul>
<li><tt class="docutils literal"><span class="pre">System.Collections.Generic.IList&lt;T&gt;</span></tt> where <tt class="docutils literal"><span class="pre">T</span></tt> is a serializable type</li>
<li><tt class="docutils literal"><span class="pre">System.Collections.Generic.IDictionary&lt;K,V&gt;</span></tt> where <tt class="docutils literal"><span class="pre">K</span></tt> is one of
<tt class="docutils literal"><span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">long</span></tt>, <tt class="docutils literal"><span class="pre">uint</span></tt>, <tt class="docutils literal"><span class="pre">ulong</span></tt>, <tt class="docutils literal"><span class="pre">bool</span></tt> or <tt class="docutils literal"><span class="pre">string</span></tt> and <tt class="docutils literal"><span class="pre">V</span></tt> is
a serializable type</li>
<li><tt class="docutils literal"><span class="pre">System.Collections.HashSet&lt;V&gt;</span></tt> where <tt class="docutils literal"><span class="pre">V</span></tt> is a serializable type</li>
</ul>
</li>
<li>Return types can be <tt class="docutils literal"><span class="pre">void</span></tt></li>
</ul>
</div>
<div class="section" id="game-scenes">
<span id="service-api-game-scenes"></span><h3>Game Scenes<a class="headerlink" href="#game-scenes" title="Permalink to this headline">¶</a></h3>
<p>Each service is configured to be available from a particular game scene, or
scenes.</p>
<dl class="class">
<dt id="GameScene">
<em class="property">class </em><tt class="descname">GameScene</tt><a class="headerlink" href="#GameScene" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="GameScene.SpaceCenter">
<tt class="descname">SpaceCenter</tt><a class="headerlink" href="#GameScene.SpaceCenter" title="Permalink to this definition">¶</a></dt>
<dd><p>The game scene showing the Kerbal Space Center buildings.</p>
</dd></dl>

<dl class="attribute">
<dt id="GameScene.Flight">
<tt class="descname">Flight</tt><a class="headerlink" href="#GameScene.Flight" title="Permalink to this definition">¶</a></dt>
<dd><p>The game scene showing a vessel in flight (or on the launchpad/runway).</p>
</dd></dl>

<dl class="attribute">
<dt id="GameScene.TrackingStation">
<tt class="descname">TrackingStation</tt><a class="headerlink" href="#GameScene.TrackingStation" title="Permalink to this definition">¶</a></dt>
<dd><p>The tracking station.</p>
</dd></dl>

<dl class="attribute">
<dt id="GameScene.EditorVAB">
<tt class="descname">EditorVAB</tt><a class="headerlink" href="#GameScene.EditorVAB" title="Permalink to this definition">¶</a></dt>
<dd><p>The Vehicle Assembly Building.</p>
</dd></dl>

<dl class="attribute">
<dt id="GameScene.EditorSPH">
<tt class="descname">EditorSPH</tt><a class="headerlink" href="#GameScene.EditorSPH" title="Permalink to this definition">¶</a></dt>
<dd><p>The Space Plane Hangar.</p>
</dd></dl>

<dl class="attribute">
<dt id="GameScene.Editor">
<tt class="descname">Editor</tt><a class="headerlink" href="#GameScene.Editor" title="Permalink to this definition">¶</a></dt>
<dd><p>Either the VAB or the SPH.</p>
</dd></dl>

<dl class="attribute">
<dt id="GameScene.All">
<tt class="descname">All</tt><a class="headerlink" href="#GameScene.All" title="Permalink to this definition">¶</a></dt>
<dd><p>All game scenes.</p>
</dd></dl>

</dd></dl>

<p><strong>Examples</strong></p>
<ul>
<li><p class="first">Declare a service that is available in the <a class="reference internal" href="#GameScene.Flight" title="GameScene.Flight"><tt class="xref py py-attr docutils literal"><span class="pre">GameScene.Flight</span></tt></a> game
scene:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService (GameScene = GameScene.Flight)]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">MyService</span> <span class="p">{</span>
   <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Declare a service that is available in the <a class="reference internal" href="#GameScene.Flight" title="GameScene.Flight"><tt class="xref py py-attr docutils literal"><span class="pre">GameScene.Flight</span></tt></a> and
<a class="reference internal" href="#GameScene.Editor" title="GameScene.Editor"><tt class="xref py py-attr docutils literal"><span class="pre">GameScene.Editor</span></tt></a> game scenes:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="na">[KRPCService (GameScene = (GameScene.Flight | GameScene.Editor))]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">MyService</span> <span class="p">{</span>
   <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="further-examples">
<h2>Further Examples<a class="headerlink" href="#further-examples" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference external" href="https://github.com/djungelorm/krpc/tree/latest-version/src/kRPCSpaceCenter/Services">SpaceCenter service implementation</a>
for more extensive examples.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="communication-protocol.html" class="btn btn-neutral float-right" title="Communication Protocol">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="compiling.html" class="btn btn-neutral" title="Compiling kRPC"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, djungelorm.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61341323-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>